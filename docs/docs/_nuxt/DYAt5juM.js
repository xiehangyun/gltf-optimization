import{initBasis as o}from"./ChbFcRqi.js";async function f(i,r,a){let t=await o(),{BasisEncoder:l}=t,e=new l;const c=t.basis_tex_format.cUASTC4x4.value;e.setFormatMode(c),e.setUASTC(!0),e.setCreateKTX2File(!0),e.setKTX2UASTCSupercompression(!0);let n=t.ldr_image_type.cPNGImage.value;(r==="image/jpeg"||r==="image/jpg"||r==="jfif")&&(n=t.ldr_image_type.cJPGImage.value),e.setSliceSourceImage(0,i,0,0,n),e.setPackUASTCFlags(0),e.setKTX2SRGBTransferFunc(a),e.setPerceptual(a),e.setMipGen(!0),e.setMipSRGB(a);const u=new Uint8Array(4096*4096*32);try{const s=e.encode(u);return s===0?null:u.slice(0,s)}catch{return null}finally{e.delete()}}export{f as toKTX2UASTC};
