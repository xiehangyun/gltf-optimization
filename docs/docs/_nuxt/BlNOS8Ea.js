import{d as f,r,o as x,t as y,v as g,x as l,H as a,I as k,J as u}from"./DQgpS6KN.js";import{gltfOptimization as B}from"./BtB7YGgt.js";import"./DYAt5juM.js";import"./ChbFcRqi.js";const V=f({__name:"index",setup(U){const d=r(null),t=r({maxSize:2048,hasJoin:!0,hasPalette:!0,hasFlatten:!0,hasKtx2:!0});x(async()=>{console.log(t)});async function p(i){const e=i.target;if(e.disabled=!0,e.files&&e.files.length>0){const n=e.files[0],m=await n.arrayBuffer(),v=await B(m,t.value);e.disabled=!1;const b=new Blob([v],{type:"application/octet-stream"}),s=URL.createObjectURL(b),o=document.createElement("a");o.href=s,o.download=n.name.replace(".glb","-optimized.glb"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}else alert("请上传一个有效的GLB文件。")}return(i,e)=>(g(),y("div",{ref_key:"container",ref:d},[e[12]||(e[12]=l("div",null,"注意！KTX2压缩仅支持2K及以下纹理",-1)),l("div",null,[e[6]||(e[6]=l("label",null,"最大纹理尺寸：",-1)),a(l("select",{name:"",id:"","onUpdate:modelValue":e[0]||(e[0]=n=>t.value.maxSize=n)},e[5]||(e[5]=[l("option",{value:512},"512",-1),l("option",{value:1024},"1024",-1),l("option",{value:2048},"2048",-1)]),512),[[k,t.value.maxSize]])]),l("div",null,[e[7]||(e[7]=l("label",null,"合并相同材质网格：",-1)),a(l("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=n=>t.value.hasJoin=n)},null,512),[[u,t.value.hasJoin]])]),l("div",null,[e[8]||(e[8]=l("label",null,"纯色材质创建统一调色板纹理并合并：",-1)),a(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=n=>t.value.hasPalette=n)},null,512),[[u,t.value.hasPalette]])]),l("div",null,[e[9]||(e[9]=l("label",null,"展平多余节点：",-1)),a(l("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=n=>t.value.hasFlatten=n)},null,512),[[u,t.value.hasFlatten]])]),l("div",null,[e[10]||(e[10]=l("label",null,"启用KTX2纹理压缩：",-1)),a(l("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=n=>t.value.hasKtx2=n)},null,512),[[u,t.value.hasKtx2]])]),l("div",null,[e[11]||(e[11]=l("label",null,"选择一个GLB文件：",-1)),l("input",{type:"file",onChange:p,id:"glbInput",accept:".glb"},null,32)])],512))}});export{V as default};
